{% extends "roomit_app/base.html" %}
{% load infinite_scroll %}
{% block content %}

<div class="item-box">
    {% for item in feed %}
        {% if request.user == item.Username_insert %}
            <a href="user/profile/{{item.Username_insert}}">
              <div style="display: flex; flex-direction: column; align-items: center;">
                <img src="{{ item.Username_enter.profile.image.url }}" alt="{{ item.Username_enter }}" style="max-width: 75%; height: auto;">
                <h2 style="text-align: center; margin-top: 20px;">{{ item.Username_enter.profile.first_name }} {{ item.Username_enter.profile.last_name }}</h2>
                <p style="text-align: center;">Score: {{ item.Insert_score }}</p>
              </div>
            </a>
    <div style="display: flex; flex-direction: column; align-items: center;">
                <a href="/like-picture">
        <button class="like-button" data-user="{{ item.Username_enter }}">Like</button>
                </a>
    </div>
        {% else %}
            <a href="user/profile/{{item.Username_enter}}">
              <div style="display: flex; flex-direction: column; align-items: center;">
                <img src="{{ item.Username_insert.profile.image.url }}" alt="{{ item.Username_insert }}" style="max-width: 75%; height: auto;">
                <h2 style="text-align: center; margin-top: 20px;">{{ item.Username_insert.profile.first_name }} {{ item.Username_insert.profile.last_name }}</h2>
                <p style="text-align: center;">Score: {{ item.Enter_score }}</p>
              </div>
            </a>
    <div style="display: flex; flex-direction: column; align-items: center;">
        <a href="/like-picture">
        <button class="like-button" data-user="{{ item.Username_insert }}">Like</button>
            </a>
    </div>
        {% endif %}
    {% endfor %}
    <script>
        $(document).ready(function() {
            $('.like-button').on('click', function() {
                var user = $(this).data('user');
                var csrftoken = Cookies.get('csrftoken');  // get CSRF token from cookie
                $.post('/like-picture/', {user: user, csrfmiddlewaretoken: csrftoken}, function(data) {
                    if (data.success) {
                        alert('Picture liked!');
                    }
                });
            });
        });
    </script>
</div>
<div class="item-box">
    {% infinite_scroll_box %}
    <!--{#% DEPRECATED include 'infscroll/scroll_box.html' %#}-->
</div>
    {% set_infinite_scroll %}
        <!-- {#% DEPRECATED include 'infscroll/scroll.html' %#}-->
{% endblock content%}
